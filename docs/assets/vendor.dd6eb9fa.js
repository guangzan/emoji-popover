class t{constructor(t){this.opts=t,this.options=Object.assign({},{container:"body",button:".e-btn",targetElement:".e-input",emojiList:[]},t),this._init(),document.querySelector(".emoji-mask").addEventListener("click",(()=>this.toggle(!1)));const{button:e}=this.options;document.querySelector(e).addEventListener("click",(()=>this.toggle(!0)))}_init(){const{emojiList:t,container:e,button:i,targetElement:s}=this.options,n=this.createEmojiContainer(),o=this.createEmojiList(t),c=this.createMask();n.appendChild(o),n.appendChild(c);const a=document.querySelector(s),{left:r,top:l,height:d}=a.getClientRects()[0];n.style.top=`${l+d+12}px`,n.style.left=`${r}px`,document.querySelector(e).appendChild(n)}createEmojiContainer(){const t=document.createElement("div");return t.classList.add("emoji-wrap"),t.classList.add("anim-scale-in"),t}createEmojiList(t){const e=document.createElement("div");return e.classList.add("emoji-list"),t.forEach((t=>{const i=this.createEmojiItem(t);e.appendChild(i)})),e}createEmojiItem(t){const{value:e,label:i}=t,s=document.createElement("div");let n;var o;return o=e,new RegExp("http").test(o)?(n=document.createElement("img"),n.classList.add("emoji"),n.classList.add("emoji-img"),n.setAttribute("src",e)):(n=document.createElement("span"),n.classList.add("emoji"),n.classList.add("emoji-text"),n.innerText=e),s.classList.add("emoji-item"),s.appendChild(n),"string"==typeof i&&s.setAttribute("title",i),s}createMask(){const t=document.createElement("div");return t.classList.add("emoji-mask"),t}toggle(t){document.querySelector(".emoji-wrap").style.display=t?"block":"none"}onSelect(t){const e=document.querySelectorAll(".emoji-item"),i=this;e.forEach((function(e){e.addEventListener("click",(function(e){const s=e.currentTarget;let n;n=s.children[0].classList.contains("emoji-img")?s.children[0].getAttribute("src"):s.innerText,i.toggle(!1),t(n)}))}))}}export{t as E};
