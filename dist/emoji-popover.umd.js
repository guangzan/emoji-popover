!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).EmojiPopover=t()}(this,(function(){"use strict";return class{constructor(e){this.opts=e;this.options=Object.assign({},{container:"body",button:".e-btn",targetElement:".e-input",emojiList:[]},e),this._init();document.querySelector(".emoji-mask").addEventListener("click",(()=>this.toggle(!1)));const{button:t}=this.options;document.querySelector(t).addEventListener("click",(()=>this.toggle(!0)))}_init(){const{emojiList:e,container:t,button:i,targetElement:n}=this.options,o=this.createEmojiContainer(),s=this.createEmojiList(e),c=this.createMask();o.appendChild(s),o.appendChild(c);const a=document.querySelector(n),{left:r,top:l,height:d}=a.getClientRects()[0];o.style.top=`${l+d+12}px`,o.style.left=`${r}px`;document.querySelector(t).appendChild(o)}createEmojiContainer(){const e=document.createElement("div");return e.classList.add("emoji-wrap"),e.classList.add("anim-scale-in"),e}createEmojiList(e){const t=document.createElement("div");return t.classList.add("emoji-list"),e.forEach((e=>{const i=this.createEmojiItem(e);t.appendChild(i)})),t}createEmojiItem(e){const{value:t,label:i}=e,n=document.createElement("div");let o;var s;return s=t,new RegExp("http").test(s)?(o=document.createElement("img"),o.classList.add("emoji"),o.classList.add("emoji-img"),o.setAttribute("src",t)):(o=document.createElement("span"),o.classList.add("emoji"),o.classList.add("emoji-text"),o.innerText=t),n.classList.add("emoji-item"),n.appendChild(o),"string"==typeof i&&n.setAttribute("title",i),n}createMask(){const e=document.createElement("div");return e.classList.add("emoji-mask"),e}toggle(e){document.querySelector(".emoji-wrap").style.display=e?"block":"none"}onSelect(e){const t=document.querySelectorAll(".emoji-item"),i=this;t.forEach((function(t){t.addEventListener("click",(function(t){const n=t.currentTarget;let o;o=n.children[0].classList.contains("emoji-img")?n.children[0].getAttribute("src"):n.innerText,i.toggle(!1),e(o)}))}))}}}));
