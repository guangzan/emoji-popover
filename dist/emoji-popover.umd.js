!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).EmojiPopover=e()}(this,(function(){"use strict";return class{constructor(t){this.opts=t;this.options=Object.assign({},{container:"body",button:".e-btn",targetElement:".e-input",emojiList:[],wrapClassName:"",wrapAnimationClassName:"anim-scale-in"},t),this.wrapClassName="emoji-wrap",this.wrapCount=document.querySelectorAll(".emoji-wrap").length+1,this.wrapCountClassName=`emoji-wrap-${this.wrapCount}`,this.init(),this.createButtonListener()}init(){const{emojiList:t,container:e,button:s,targetElement:i}=this.options,n=this.createEmojiContainer(),a=this.createEmojiList(t),o=this.createMask();n.appendChild(a),n.appendChild(o);const c=document.querySelector(i),{left:r,top:l,height:d}=c.getClientRects()[0];n.style.top=`${l+d+12}px`,n.style.left=`${r}px`;document.querySelector(e).appendChild(n)}createButtonListener(){const{button:t}=this.options;document.querySelector(t).addEventListener("click",(()=>this.toggle(!0)))}createEmojiContainer(){const{wrapAnimationClassName:t,wrapClassName:e}=this.options,s=document.createElement("div");return s.classList.add(this.wrapClassName),s.classList.add(this.wrapCountClassName),s.classList.add(t),""!==e&&s.classList.add(e),s}createEmojiList(t){const e=document.createElement("div");return e.classList.add("emoji-list"),t.forEach((t=>{const s=this.createEmojiItem(t);e.appendChild(s)})),e}createEmojiItem(t){const{value:e,label:s}=t,i=document.createElement("div");let n;var a;return a=e,new RegExp("http").test(a)?(n=document.createElement("img"),n.classList.add("emoji"),n.classList.add("emoji-img"),n.setAttribute("src",e)):(n=document.createElement("span"),n.classList.add("emoji"),n.classList.add("emoji-text"),n.innerText=e),i.classList.add("emoji-item"),i.appendChild(n),"string"==typeof s&&i.setAttribute("title",s),i}createMask(){const t=document.createElement("div");return t.classList.add("emoji-mask"),t.addEventListener("click",(()=>this.toggle(!1))),t}toggle(t){document.querySelector(`.${this.wrapCountClassName}`).style.display=t?"block":"none"}onSelect(t){const e=document.querySelectorAll(`.${this.wrapCountClassName} .emoji-item`),s=this;e.forEach((function(e){e.addEventListener("click",(function(e){const i=e.currentTarget;let n;n=i.children[0].classList.contains("emoji-img")?i.children[0].getAttribute("src"):i.innerText,s.toggle(!1),t(n)}))}))}}}));
