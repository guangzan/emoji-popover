export default class{constructor(t){this.opts=t;this.options=Object.assign({},{container:"body",button:".e-btn",targetElement:".e-input",emojiList:[]},t),this._init();document.querySelector(".emoji-mask").addEventListener("click",(()=>this.toggle(!1)));const{button:e}=this.options;document.querySelector(e).addEventListener("click",(()=>this.toggle(!0)))}_init(){const{emojiList:t,container:e,button:i,targetElement:n}=this.options,s=this.createEmojiContainer(),o=this.createEmojiList(t),c=this.createMask();s.appendChild(o),s.appendChild(c);const a=document.querySelector(n),{left:r,top:l,height:d}=a.getClientRects()[0];s.style.top=`${l+d+12}px`,s.style.left=`${r}px`;document.querySelector(e).appendChild(s)}createEmojiContainer(){const t=document.createElement("div");return t.classList.add("emoji-wrap"),t.classList.add("anim-scale-in"),t}createEmojiList(t){const e=document.createElement("div");return e.classList.add("emoji-list"),t.forEach((t=>{const i=this.createEmojiItem(t);e.appendChild(i)})),e}createEmojiItem(t){const{value:e,label:i}=t,n=document.createElement("div");let s;var o;return o=e,new RegExp("http").test(o)?(s=document.createElement("img"),s.classList.add("emoji"),s.classList.add("emoji-img"),s.setAttribute("src",e)):(s=document.createElement("span"),s.classList.add("emoji"),s.classList.add("emoji-text"),s.innerText=e),n.classList.add("emoji-item"),n.appendChild(s),"string"==typeof i&&n.setAttribute("title",i),n}createMask(){const t=document.createElement("div");return t.classList.add("emoji-mask"),t}toggle(t){document.querySelector(".emoji-wrap").style.display=t?"block":"none"}onSelect(t){const e=document.querySelectorAll(".emoji-item"),i=this;e.forEach((function(e){e.addEventListener("click",(function(e){const n=e.currentTarget;let s;s=n.children[0].classList.contains("emoji-img")?n.children[0].getAttribute("src"):n.innerText,i.toggle(!1),t(s)}))}))}}
